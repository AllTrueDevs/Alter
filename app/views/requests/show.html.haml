-if (@request.status == 'actual') && (can? :edit, @request)
  = link_to 'Редагувати', edit_request_path(@request)
-if (@request.status == 'actual') && (can? :destroy, @request)
  = link_to 'Закрити запит', @request, :method => :delete, :data => { :confirm => 'Are you sure?' }

%p= @request.name

= image_tag @request.photo.url

%p= @request.description

- @request.required_items.each do |required_item|
  %span{class: "label label-#{required_item.category.color}"}= Category.find(required_item.category_id).name

= image_tag @request.user.avatar.url

%b Користувач:
= @request.user.name

- if (@request.user != current_user) and (can? :create, Decision) and (@request.status =='actual')
  -if @request.decisions.where(helper_id: current_user.id).empty?
    %input( type="button" data-toggle="modal" data-target="#exampleModal" class="link" value="Я можу допомогти")
  -else
    %small Очікується відповідь
.modal.fade#exampleModal( tabindex="-1" aria-labelledby="exampleModalLabel" )
  .modal-dialog
    .modal-content.create-params
      .modal-header
        %button( class="close" data-dismiss="modal" aria-label="Close" )
          %span
            &times;
      = form_for Decision.new do
        .field
          = select_tag :required_items, options_from_collection_for_select(@required_items, 'id', 'category_name'), multiple: true

          = submit_tag 'Підтвердити', :class => 'btn btn-primary'

:javascript
  $(document).ready(function() {
    $('#required_items').multiselect({
      enableFiltering: true,
      includeSelectAllOption: true,
      maxHeight: 200,
      dropUp: true
    });
  });
