#myModal.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"}
  .modal-dialog
    .modal-content
      .modal-header
        %button.close{"data-dismiss" => "modal", :type => "button"}
          %span{"aria-hidden" => "true"} ×
          %span.sr-only Закрити
        %h4#myModalLabel.modal-title Підтвердження допомоги
      = form_for Decision.new do
        .modal-body
          = hidden_field_tag :request_id, @request.id
          %p
            = text_area_tag :description, nil, class: 'form-control', rows: '7'
          %p
            = select_tag :required_items, options_from_collection_for_select(@required_items, 'id', 'category_name'), multiple: true
        .modal-footer
          = submit_tag 'Надіслати', :class => 'btn btn-success'

.col-md-9
  .panel.panel-default.panel-100
    .panel-heading
      .row
        .col-md-10
          %h4.break-word= @request.name
        .col-md-2
          .pull-right.request-actions
            - if (@request.user != current_user) and (can? :create, Decision) and (@request.status =='actual')
              -if @request.decisions.where(helper_id: current_user.id).empty?
                %button.btn.btn-success.btn-sm{"data-target" => "#myModal", "data-toggle" => "modal"}
                  Допомогти
              -else
                %small Очікується відповідь
            -if (@request.status == 'actual') && (can? :edit, @request)
              = link_to edit_request_path(@request)do
                %span.glyphicon.glyphicon-pencil{"aria-hidden" => "true"}
            -if (@request.status == 'actual') && (can? :destroy, @request)
              = link_to @request, :method => :delete, :data => { :confirm => 'Закрити запит?' } do
                %span.glyphicon.glyphicon-remove{"aria-hidden" => "true"}

    .panel-body
      = image_tag @request.photo.url, class: 'request-photo img-responsive img-center'
      %p.break-word.text-justify.request-description= @request.description
      - @request.required_items.each do |required_item|
        =link_to requests_path(category_id: required_item.category.id) do
          %span{class: "label label-#{required_item.category.color}"}= Category.find(required_item.category_id).name

.col-md-3
  .panel.panel-default.panel-100
    .panel-heading 
      %h4 Автор
    .panel-body
      .text-center
        = link_to @request.user.name, @request.user, class: 'break-word'
        = image_tag @request.user.avatar.url, class: 'img-responsive img-center img-thumbnail'
      -if @request.user.phone.to_s.length > 0
        %p
          %strong Телефон:
          = @request.user.phone
      -if @request.user.skype.to_s.length > 0
        %p
          %strong Skype:
          = @request.user.skype

:javascript
  $(document).ready(function() {
    $('#required_items').multiselect({
      enableFiltering: true,
      includeSelectAllOption: true,
      maxHeight: 200,
      dropUp: true
    });
  });
