-if (@request.status == 'actual') && (can? :edit, @request)
  = link_to 'Редагувати', edit_request_path(@request)
-if (@request.status == 'actual') && (can? :destroy, @request)
  = link_to 'Закрити запит', @request, :method => :delete, :data => { :confirm => 'Are you sure?' }

%p= @request.name

= image_tag @request.photo.url

%p= @request.description

- @request.required_items.each do |required_item|
  %span{class: "label label-#{required_item.category.color}"}= Category.find(required_item.category_id).name

= image_tag @request.user.avatar.url

%b Користувач:
= @request.user.name

- if (@request.user != current_user) and (can? :create, Decision) and (@request.status =='actual')
  -if @request.decisions.where(helper_id: current_user.id).empty?
    %button.btn.btn-primary.btn-lg{"data-target" => "#myModal", "data-toggle" => "modal"}
      Допомогти
  -else
    %small Очікується відповідь

#myModal.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"}
  .modal-dialog
    .modal-content
      .modal-header
        %button.close{"data-dismiss" => "modal", :type => "button"}
          %span{"aria-hidden" => "true"} ×
          %span.sr-only Закрити
        %h4#myModalLabel.modal-title Підтвердження допомоги
      = form_for Decision.new do
        .modal-body
          .field
            = select_tag :required_items, options_from_collection_for_select(@required_items, 'id', 'category_name'), multiple: true
        .modal-footer
          %button.btn.btn-default{"data-dismiss" => "modal", :type => "button"} Закрити
          = submit_tag 'Надіслати', :class => 'btn btn-primary'



:javascript
  $(document).ready(function() {
    $('#required_items').multiselect({
      enableFiltering: true,
      includeSelectAllOption: true,
      maxHeight: 200,
      dropUp: true
    });
  });
